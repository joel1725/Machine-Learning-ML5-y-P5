function setup(){}function draw(){}$(function(){var o={_nivelActual:1,_fotosFrontales:0,_fotosDePerfil:0,_modelo:"",cargar:function(){o.loader.mostrarLoader(),o.modelo.cargar(),$(".primerTexto .btnSiguiente, .segundoTexto .btnSiguiente").click(function(){o.navegacion()})},loader:{mostrarLoader:function(){$(".textoLoading").addClass("mostrarLoader")},ocultarLoader:function(){$(".textoLoading").removeClass("mostrarLoader")}},navegacion:function(){o._fotosFrontales>=5&&1==o._nivelActual?($(".primerTexto, .segundoTexto, .tercerTexto, .cuartoTexto").animate({top:-210*o._nivelActual+"px"},400),o._nivelActual+=1):o._fotosFrontales<5&&1==o._nivelActual?alert("You need take at least 5 frontal pictures"):o._fotosDePerfil>=5&&2==o._nivelActual?($(".primerTexto, .segundoTexto, .tercerTexto, .cuartoTexto").animate({top:-210*o._nivelActual+"px"},400),o._nivelActual+=1):o._fotosDePerfil<5&&2==o._nivelActual?alert("You need take at least 5 profile pictures"):3==o._nivelActual&&($(".primerTexto, .segundoTexto, .tercerTexto, .cuartoTexto").animate({top:-210*o._nivelActual+"px"},400),o._nivelActual+=1)},modelo:{cargar:function(){o._modelo=ml5.featureExtractor("MobileNet",function(){console.log("Model is ready"),$(".textoLoading .loadingAzul").html("WAITING WEBCAM TO LOAD..."),$(".textoLoading .loadingGris").html("WAITING WEBCAM TO LOAD..."),setTimeout(function(){o.video.cargar()},2e3)}),$(".btnTomarFoto").click(function(){1==o._nivelActual?o.modelo.tomarFotoFrontal():2==o._nivelActual&&o.modelo.tomarFotoDePerfil()}),$(".tercerTexto .btnSiguiente").click(function(){3==o._nivelActual&&o.modelo.entrenar()})},tomarFotoFrontal:function(){o._fotosFrontales<4?(o._fotosFrontales++,$(".primerTexto .fotosTomadas").append(o._fotosFrontales+", "),o._modelo.addImage("Front")):4==o._fotosFrontales?(o._fotosFrontales++,$(".primerTexto .fotosTomadas").append(o._fotosFrontales+" - Done"),o._modelo.addImage("Front")):o._fotosFrontales>4&&(o._fotosFrontales++,o._modelo.addImage("Front"))},tomarFotoDePerfil:function(){o._fotosDePerfil<4?(o._fotosDePerfil++,$(".segundoTexto .fotosTomadas").append(o._fotosDePerfil+", "),o._modelo.addImage("Profile")):4==o._fotosDePerfil?(o._fotosDePerfil++,$(".segundoTexto .fotosTomadas").append(o._fotosDePerfil+" - Done"),o._modelo.addImage("Profile")):o._fotosDePerfil>4&&(o._fotosDePerfil++,o._modelo.addImage("Profile"))},entrenar:function(){function e(t,a){t?($(".textoLoading .loadingAzul").html("ERROR JUST HAPPEND..."),$(".textoLoading .loadingGris").html("ERROR JUST HAPPEND..."),o.loader.mostrarLoader(),console.error(t)):(o.navegacion(),$("#camara .redultado").html(a),o._modelo.classify(e))}$(".textoLoading .loadingAzul").html("TRAINING THE MODEL..."),$(".textoLoading .loadingGris").html("TRAINING THE MODEL..."),o.loader.mostrarLoader(),o._modelo.train(function(t){null===t?($(".textoLoading .loadingAzul").html("FINISHED TRAINING..."),$(".textoLoading .loadingGris").html("FINISHED TRAINING..."),setTimeout(function(){o.loader.ocultarLoader(),o._modelo.classify(e),console.log("Finished training")},2e3)):$(".tercerTexto .fotosTomadas").html("Working loss: "+t)})}},video:{_clasificador:"",cargar:function(){var e,t=$("#camara").width(),a=$("#camara").height();new p5(function(r){r.setup=function(){r.createCanvas(t,a),(e=createCapture(VIDEO)).hide(),o.video._clasificador=o._modelo.classification(e,n)},r.draw=function(){r.background(0),r.image(e,0,0,t,a)}},"camara");function n(){$(".avatarCont").animate({opacity:"0"},2e3,function(){$(this).css({display:"none"}),$("#camara").animate({opacity:"1"},400),$(".textoExplicativo").animate({opacity:"1"}),o.loader.ocultarLoader(),console.log("Video ready")})}}}};o.cargar()});
